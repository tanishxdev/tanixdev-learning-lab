

# Topic 27 — ROLES

(System Role, User Role, Assistant Role)

---

# 1. CONCEPT SUMMARY

LLMs structure conversation using **roles**, not just text.

Three key roles:

1. **system**
2. **user**
3. **assistant**

They help the model understand:

* who is speaking
* how to behave
* what instructions are strict
* what is free conversation

---

# 2. WHY ROLES MATTER IN GENAI ENGINEERING

### 1. System role = model’s brain initialization

It sets:

* personality
* behavior
* rules
* safety
* tone
* constraints

For agents, it's where you define:

* tool usage
* planning behavior
* refusal rules
* safety policies
* output format

### 2. User role = actual request

The user’s question or query.

### 3. Assistant role = model’s response

This is what the model generates next.

When combined, these roles allow multi-turn stable conversations.

---

# 3. THEORY (Deep + Simple)

---

## 3.1 The SYSTEM role

The highest priority message.

Examples:

```
You are a helpful and precise AI.
Always respond with short answers.
Never refuse harmless requests.
```

For agents:

```
You MUST call tools when necessary.
Do not guess. Follow the tool schema strictly.
```

For RAG:

```
Base your answer ONLY on the given context.
If context is insufficient, say "Not enough information".
```

System role **defines the rules**.

---

## 3.2 The USER role

Actual query from the user.

Examples:

```
Explain binary search.
```

For agents:

```
Book me a flight to Delhi.
```

For RAG:

```
What does the document say about pricing?
```

---

## 3.3 The ASSISTANT role

Model's output.

Examples:

```
Binary search is a divide-and-conquer algorithm...
```

Agents will output:

* tool calls
* structured JSON
* next reasoning step

---

## 3.4 Why system role overrides user role

User:

```
Write rude jokes.
```

System:

```
Never generate rude content.
```

Model follows **system** (higher priority).

This is critical for **safety**.

---

# 4. RECOMMENDED ROLE PATTERNS FOR GENAI SYSTEMS

---

## Pattern 1 — Stable Chatbot Template

```
System: You are a friendly AI tutor.
User: Explain recursion.
Assistant: (model output)
```

---

## Pattern 2 — RAG Template

```
System: You answer based only on the given context.
Context: ...
User: What does the document say about refunds?
```

---

## Pattern 3 — Agent Tool Calling Template

```
System: When needed, call tools using structured JSON.
User: Plan my trip to Mumbai.
```

---

## Pattern 4 — Strict JSON Output Template

```
System: Output only JSON.
User: Extract key points from this text...
```

---

# 5. INTERNAL MODEL PRIORITY

LLMs internally rank roles:

```
system > developer > user > assistant
```

For Gemini:

* system = highest control
* developer messages (if used) = strong constraints
* user messages = main query
* assistant messages = model memory

---

# 6. REAL GENAI EXAMPLES

---

## Example 1 — Why your prompt sometimes gets ignored

If system message is too weak, model falls back to general behavior.

Correct:

```
System: You MUST output JSON only. Never output plain text.
```

---

## Example 2 — Tool calling failure

Happens if tool schema is not in the system role.

Fix:

```
System: Tools are available. Follow exactly this JSON schema...
```

---

## Example 3 — RAG failure

If system doesn’t instruct model to stick to context, model hallucinates.

Fix:

```
System: If answer is not in context, say "No information found".
```

---

# 7. INTUITION SUMMARY

Roles tell the model:

* **who** is talking
* **what** the purpose is
* **how** to behave
* **what rules** to follow
* **what constraints** exist

System = rules
User = question
Assistant = LLM output

Mastering roles is essential for:

* prompting
* agents
* RAG
* tool calling
* JSON generation
* alignment
* safety

---

# 8. PRACTICE QUESTIONS

1. Why does system role override user role?
2. What happens if you put tool instructions in user role instead of system?
3. How does role separation help multi-turn chat?
4. Why are roles important for RAG?
5. Write a strict system role that forces JSON output.

---
