# Race Condition in Operating System

![](https://media.geeksforgeeks.org/wp-content/uploads/20250829161248232387/racecondition.webp)
---

## 1. Introduction

In a multitasking operating system, **multiple processes or threads execute concurrently**.

When two or more of these processes **access and modify shared data at the same time**, a problem called a **Race Condition** can occur.

> A **Race Condition** happens when the **final result depends on the order of execution**, not on the correctness of the logic.

Because execution order is unpredictable, race conditions make programs:

- Incorrect
- Unreliable
- Dangerous in critical systems

---

## 2. Why Race Condition Exists (Problem First)

Consider this situation:

- Two processes access the same variable
- Both attempt to update it
- The OS switches CPU execution between them unpredictably

Even if **each process works correctly in isolation**, the **combined outcome becomes wrong**.

This happens because:

- Processes run concurrently
- Execution order is not guaranteed
- Operations can be interrupted midway

---

## 3. What is a Race Condition?

### Definition

A **race condition** occurs when:

- Two or more processes or threads  
- Access the **same shared resource**  
- At the **same time**  
- And the final result depends on **which one runs first**

---

## 4. Core Concepts Behind Race Condition

---

### 4.1 Shared Resource

A **shared resource** is any entity accessed by multiple processes:

- Variables
- Files
- Memory locations
- Hardware devices

---

### 4.2 Concurrency

- Multiple processes execute **simultaneously or with overlapping execution**
- Common in multitasking and multi-core systems

---

### 4.3 Non-Atomic Operations

Some operations are **not indivisible**.

Example:
```text
balance = balance + 10
````

Internally, this happens in steps:

1. Read `balance`
2. Add `10`
3. Write updated value

If a process is interrupted between these steps, **race condition occurs**.

---

## 5. Causes of Race Condition

Race conditions mainly arise due to:

1. **Simultaneous Access**

   * Multiple processes read/write shared data together

2. **Non-Atomic Updates**

   * Read–Modify–Write operations

3. **Lack of Synchronization**

   * No mutex, semaphore, or lock

4. **Improper Scheduling**

   * OS preempts a process inside a critical section

---

## 6. Classic Example: Bank Balance Update

### Scenario

Shared variable:

```text
balance = 100
```

Two processes:

* **P1** → Add 10
* **P2** → Subtract 10

Expected result:

```text
balance = 100
```

---

### Execution Without Synchronization

1. P1 reads `balance = 100`
2. P1 is interrupted
3. P2 reads `balance = 100`
4. P2 subtracts and writes `balance = 90`
5. P1 resumes and writes `balance = 110`

Final result:

```text
90 or 110 (incorrect)
```

This incorrect outcome is a **race condition**.

---

## 7. Effects of Race Conditions

Race conditions can lead to:

---

### 7.1 Data Corruption

* Shared data becomes inconsistent

---

### 7.2 Unpredictable Behavior

* Output varies on each execution

---

### 7.3 Security Vulnerabilities

* Exploited in:

  * Banking systems
  * Authentication logic
  * File permission checks

---

### 7.4 System Crashes

* Kernel-level race conditions can crash the OS

---

## 8. Race Condition vs Critical Section

| Concept              | Meaning                                             |
| -------------------- | --------------------------------------------------- |
| **Critical Section** | Code segment that accesses shared data              |
| **Race Condition**   | Error caused when critical section is not protected |

> A **race condition occurs inside a critical section when synchronization is missing**.

---

## 9. Preventing Race Conditions

---

### 9.1 Mutual Exclusion (Mutex)

* Allows only one process in the critical section

---

### 9.2 Semaphores

* Control access using binary or counting values

---

### 9.3 Monitors

* High-level abstraction
* Automatically handles locking and synchronization

---

### 9.4 Atomic Operations

* Operations that cannot be interrupted
* Supported by hardware or OS

---

### 9.5 Disable Interrupts (Kernel Only)

* Prevents context switching
* Must be used carefully

---

### 9.6 Proper Scheduling

* Avoid preemption inside critical sections

---

## 10. Real-Life Analogy

| OS Concept      | Real-Life Example               |
| --------------- | ------------------------------- |
| Shared Variable | Shared bank account             |
| Processes       | Two people                      |
| Race Condition  | Updating balance simultaneously |
| Synchronization | Transaction lock                |

Without a lock → incorrect balance.

---

## 11. Common Interview Questions

### Basic

1. What is a race condition?
2. Why does a race condition occur?
3. Where do race conditions occur?

---

### Conceptual

1. Difference between race condition and deadlock?
2. Can race condition occur without shared data?
3. Why are non-atomic operations dangerous?

---

### Tricky

1. Does concurrency always lead to race condition?
   → No, only when shared data is unsynchronized

2. Is race condition a hardware or software problem?
   → Both (OS scheduling + program design)

---

## 12. Key Takeaways

* Race condition = **incorrect result due to execution order**
* Occurs when:

  * Shared data
  * Concurrent execution
  * No synchronization
* Critical sections must be protected
* Synchronization ensures **correctness, not performance**

> **Race conditions are silent bugs: the logic looks correct, but the result is wrong.**

