<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>History API Demo</title>
</head>
<body>

  <h2 id="page">Home Page</h2>

  <button id="homeBtn">Go Home</button>
  <button id="profileBtn">Go Profile</button>
  <button id="backBtn">Back</button>

  <script>
    // ==============================
    // DOM API (Web API)
    // ==============================

    const page = document.getElementById("page");
    const homeBtn = document.getElementById("homeBtn");
    const profileBtn = document.getElementById("profileBtn");
    const backBtn = document.getElementById("backBtn");

    // ==============================
    // pushState (History Web API)
    // ==============================

    homeBtn.addEventListener("click", () => {
      history.pushState({ page: "home" }, "", "/home");
      page.innerText = "Home Page";
      console.log("Navigated to Home");
    });

    profileBtn.addEventListener("click", () => {
      history.pushState({ page: "profile" }, "", "/profile");
      page.innerText = "Profile Page";
      console.log("Navigated to Profile");
    });

    // ==============================
    // back() (History Web API)
    // ==============================

    backBtn.addEventListener("click", () => {
      history.back(); // same as browser back button
    });

    // ==============================
    // popstate event (History Web API)
    // ==============================

    window.addEventListener("popstate", (event) => {
      console.log("Popstate fired:", event.state);

      if (!event.state) {
        page.innerText = "Home Page";
        return;
      }

      if (event.state.page === "home") {
        page.innerText = "Home Page";
      }

      if (event.state.page === "profile") {
        page.innerText = "Profile Page";
      }
    });
  </script>

</body>
</html>
