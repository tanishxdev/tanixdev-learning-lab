# Critical Section in Operating System

---

## 1. Introduction

In a multitasking operating system, **multiple processes or threads execute concurrently**.

Often, these processes need to **access shared resources**, such as:
- Variables
- Memory
- Files
- Databases
- Devices

The part of a program where a **shared resource is accessed or modified** is called a **Critical Section**.

> A **Critical Section** must be executed by **only one process or thread at a time** to avoid incorrect results.

---

## 2. Why Critical Section Exists (Problem First)

Consider this situation:

- Two processes access the same bank account balance
- Both try to update it at the same time
- CPU switches execution unpredictably

Even if each process is logically correct, the **final balance becomes wrong**.

### Problems Without Critical Section Protection

- Race conditions
- Data inconsistency
- Data loss
- Security issues

So, the OS needs a mechanism to ensure **safe access to shared resources**.

---

## 3. What is a Critical Section?

### Definition

A **Critical Section** is a **segment of code** where:
- Shared data is accessed
- Only **one process/thread** is allowed to execute at a time

If more than one process enters this section simultaneously, **race conditions occur**.

---

## 4. Structure of a Critical Section

Every critical section solution follows a **fixed structure**.

![](https://media.geeksforgeeks.org/wp-content/uploads/20250828163016996133/Critical_section.webp)
---

### 1. Entry Section

- Process requests permission to enter the critical section
- Synchronization mechanisms are applied here
- Example tools:
  - Mutex
  - Semaphore
  - Lock

---

### 2. Critical Section

- Actual code that:
  - Reads shared data
  - Modifies shared data

Only **one process** must execute this section at any time.

---

### 3. Exit Section

- Process releases the lock or semaphore
- Allows other waiting processes to enter

---

### 4. Remainder Section

- Remaining part of the program
- Does **not** access shared resources
- Can run concurrently without issues

---

## 5. Critical Section Problem

### What is the Problem?

The **Critical Section Problem** is about **designing a protocol** so that:

- Processes can safely share resources
- Race conditions are avoided
- System remains efficient and fair

---

## 6. Shared Resources and Race Conditions

### Shared Resources

Shared resources include:
- Global variables
- Memory locations
- Files
- Databases
- Devices (printer, disk)

---

### Race Condition Relation

A **race condition** occurs when:
- Two or more processes
- Execute critical section simultaneously
- Without proper synchronization

> **Race condition is the result of an unprotected critical section.**

---

## 7. Requirements of a Good Critical Section Solution

Any correct solution **must satisfy all three conditions**.

---

### 1. Mutual Exclusion

- At most **one process** can be in the critical section at a time
- Prevents simultaneous updates

This is **mandatory**.

---

### 2. Progress

- If no process is in the critical section
- And some processes want to enter
- The selection of the next process **cannot be postponed indefinitely**

Ensures the system keeps moving forward.

---

### 3. Bounded Waiting

- There must be a **limit** on how long a process waits
- Prevents **starvation**

Every process requesting the critical section will eventually get a chance.

---

## 8. Simple Conceptual Solution (Lock-Based)

A basic idea of solving the critical section problem:

```text
acquireLock();
    // Critical Section
releaseLock();
````

* Only one process can acquire the lock
* Others must wait
* Lock is released after use

Different mechanisms implement this idea internally.

---

## 9. Real-World Examples of Critical Sections

---

### 1. Banking System (ATM / Online Banking)

* **Critical Section**: Updating account balance
* **Issue if unprotected**:

  * Two withdrawals at the same time
  * Incorrect final balance

---

### 2. Ticket Booking System

* **Critical Section**: Booking the last available seat
* **Issue if unprotected**:

  * Overbooking
  * Two users get same seat

---

### 3. Print Spooler

* **Critical Section**: Accessing printer queue
* **Issue if unprotected**:

  * Mixed or lost print jobs

---

### 4. Shared File Editing

* **Critical Section**: Writing/saving document
* **Issue if unprotected**:

  * Data loss
  * Conflicting versions

---

## 10. Real-Life Analogy

| OS Concept       | Real-Life Example  |
| ---------------- | ------------------ |
| Shared Resource  | Single washroom    |
| Processes        | People             |
| Critical Section | Using the washroom |
| Synchronization  | Lock on the door   |

Without a lock → chaos.

---

## 11. Common Interview Questions

### Basic

1. What is a critical section?
2. Why is a critical section needed?
3. What problems occur without critical section protection?

---

### Conceptual

1. Difference between race condition and critical section?
2. Why is mutual exclusion necessary?
3. What is bounded waiting?

---

### Tricky

1. Can we remove critical sections completely?
   → No, shared resources always need protection.

2. Is critical section a hardware or software concept?
   → Both (software logic + OS/hardware support)

---

## 12. Key Takeaways

* Critical section = **code accessing shared data**
* Must allow **only one process at a time**
* Prevents race conditions and data inconsistency
* Requires:

  * Mutual exclusion
  * Progress
  * Bounded waiting

> **Critical section is the foundation of all synchronization mechanisms.**
