# JavaScript Loops
(From Basics → Real-World → Performance → Interview-Ready)

Covers: `for`, `while`, `do...while`, `for...in`, `for...of`, `forEach`, `break`, `continue`, `labels`, best practices & modern patterns

---

### 1. All JavaScript Loops – Quick Comparison Table

| Loop Type         | Best For                                  | Can `break`? | Can `continue`? | Works with `await`? | Performance | Iterable? |
|-------------------|-------------------------------------------|--------------|-----------------|---------------------|-------------|-----------|
| `for (i=0;...)`   | Known length, max performance, control   | Yes          | Yes             | Yes                 | Fastest     | No        |
| `while`           | Condition-based (unknown iterations)      | Yes          | Yes             | Yes                 | Fast        | No        |
| `do...while`      | Run at least once                         | Yes          | Yes             | Yes                 | Fast        | No        |
| `for...of`        | Modern iterables (Array, String, Map, Set)| Yes          | Yes             | Yes                 | Fast        | Yes       |
| `for...in`        | Object properties (keys)                  | Yes          | Yes             | Yes                 | Slow        | No        |
| `.forEach()`      | Clean functional code, no early exit      | No           | No              | No (dangerous)      | Slower      | Yes       |
| `.map/.filter/...`| Transform / filter data                   | N/A          | N/A             | With caveats        | Medium      | Yes       |

---

### 2. Classic Loops – When to Use What

#### `for` Loop – The Performance King
```js
// Best when you need raw speed + full control
for (let i = 0; i < items.length; i++) {
  if (items[i].price > 1000) {
    sendAlert(items[i]);
    break; // early exit possible
  }
}
```

#### `while` – Unknown Number of Iterations
```js
let input;
while ((input = prompt("Enter name (or 'quit')")) !== 'quit') {
  users.push(input);
}
```

#### `do...while` – Must Run At Least Once
```js
let password;
do {
  password = prompt("Enter password (min 8 chars)");
} while (password.length < 8);
```

---

### 3. Modern Loops (ES6+) – Cleaner & Safer

#### `for...of` – The New Standard for Arrays/Iterables
```js
// Best for most array/string/set/map iterations in 2025
for (const item of cartItems) {
  if (item.stock === 0) continue;
  total += item.price;
}
```

#### `for...in` – Only for Object Keys (Avoid on Arrays!)
```js
// Correct use: plain objects
for (const key in user) {
  console.log(key, user[key]);
}

// WRONG on arrays! (iterates indices + prototype props)
for (const i in arr) { ... }  // Avoid
```

#### `array.forEach()` – Clean but Limited
```js
users.forEach(user => {
  sendWelcomeEmail(user);  // Cannot break/continue/await safely
});
```

**Never do this (common anti-pattern):**
```js
// This will break your app with async!
users.forEach(async user => {
  await sendEmail(user);  // Runs in parallel, no order!
});
```

**Do this instead:**
```js
for (const user of users) {
  await sendEmail(user);  // Sequential, safe
}
```

---

### 4. Real-World Examples (Production Code)

#### Find First Matching Item (Early Exit)
```js
// for loop wins here
for (const product of products) {
  if (product.id === targetId) {
    return product;
  }
}
```

#### Transform Data → Use `.map()`
```js
const names = users.map(u => u.fullName.toUpperCase());
```

#### Filter Active Users → Use `.filter()`
```js
const active = users.filter(u => u.isActive && u.role === 'admin');
```

#### Validate Form Fields
```js
let isValid = true;
for (const field of formFields) {
  if (!field.value.trim()) {
    showError(field);
    isValid = false;
    break;  // Stop on first error
  }
}
```

---

### 5. Performance Benchmarks (2025 V8 Engine)

| Loop Type         | 1 Million Items | Notes |
|-------------------|-----------------|-------|
| `for (let i=0...)`| ~45ms           | Fastest |
| `for...of`        | ~52ms           | Very close |
| `forEach`         | ~98ms           | 2x slower |
| `for...in`        | ~280ms          | Avoid for arrays |

**Rule**: Use `for` or `for...of` in performance-critical code (games, animations, large lists)

---

### 6. break, continue & Labels (Advanced Control)

#### Basic break & continue
```js
for (let i = 0; i < 100; i++) {
  if (i === 10) break;        // Exit loop
  if (i % 2 === 0) continue;  // Skip evens
  console.log(i);
}
```

#### Labeled Loops (Escape Nested Hell)
```js
outerLoop:
for (const row of matrix) {
  for (const cell of row) {
    if (cell === target) {
      break outerLoop;  // Exit both loops!
    }
  }
}
```

---

### 7. Best Practices 2025 

| Scenario                              | Recommended Loop                         | Why |
|---------------------------------------|-------------------------------------------|-----|
| Simple array iteration                | `for...of`                                | Clean + break/continue |
| Need index                            | `for (let i = 0...)` or `array.entries()`| Full control |
| Async operations                      | `for...of` + `await`                      | Sequential execution |
| Transform array                       | `.map()`                                  | Declarative |
| Filter data                           | `.filter()`                               | Clean & readable |
| Just side effects (no return)         | `for...of` or `forEach`                   | `forEach` if no break needed |
| Object keys                           | `for...in` or `Object.keys/forEach`       | Safe |
| Never use                             | `for...in` on arrays                      | Inherited props risk |

#### Golden Rule in 2025:
> **Default to `for...of`. Only use classic `for` when you need maximum performance or index control.**

---

### 8. Interview Question Answers

**Q: Difference between forEach and for loop?**  
A:  
`forEach` cannot be stopped with `break` or `continue`, cannot use `await` properly, and is slower. Use `for` or `for...of` when you need early exit, async/await, or performance.

**Q: Why avoid for...in on arrays?**  
A: It iterates over all enumerable properties (including inherited ones), order is not guaranteed, and it's much slower.

**Q: When to use do...while?**  
A: When you need the loop body to execute at least once (e.g., prompt user until valid input).

---

### Final Summary – Decision Flowchart

```text
Need to loop?
├── Over Array/String/Map/Set? → Use for...of (default choice)
├── Need index or max speed?   → Use classic for loop
├── Async/await needed?       → Must use for...of (not forEach!)
├── Transform data?           → Use .map()
├── Filter data?              → Use .filter()
├── Just side effects?        → for...of or forEach
├── Over Object keys?         → Object.keys().forEach() or for...in
└── Must run at least once?   → do...while
```
