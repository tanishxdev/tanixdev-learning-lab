# JavaScript Strings

### 1. What is a String?
A **string** is a sequence of characters used to represent text.  
In JavaScript:
- No separate `char` type (unlike Java/C++)
- Strings are **immutable** (like Python & Java)
- Stored as **primitives** by default

### 2. How to Create Strings (All Ways)

| Method                  | Syntax                                 | Recommended? | Notes |
|-------------------------|----------------------------------------|--------------|-------------------------|
| String Literal (Best)   | `'hello'` or `"hello"`                 | Yes          | Primitive string, fast |
| Double/Single Quotes    | `'Geeks'` or `"Geeks"`                 | Yes          | Same result, be consistent |
| Template Literals (ES6) | `Hello ${name}!`                       | Highly       | Allows interpolation & multiline |
| Constructor (Avoid)     | `new String("hello")`                  | No           | Creates String **object**, not primitive |

```js
let a = "JavaScript";        // primitive (recommended)
let b = 'JavaScript';        // same
let c = `JavaScript`;        // template literal
let d = new String("JS");    // object → avoid!
```

**Warning**: Never use `new String()` in real projects — causes bugs in comparisons:
```js
console.log("hello" == new String("hello")); // true  (coercion)
console.log("hello" === new String("hello")); // false! (different type)
```

### 3. Template Literals (Backticks) – Most Powerful Way

```js
let name = "Alice";
let score = 95;

let message = `Hello ${name}!
Your score is ${score + 5} out of 100.
Keep it up!`;

console.log(message);
```

**Features**:
- Multiline strings
- Expression interpolation `${}`
- Nested templates
- Tagged templates (advanced)

### 4. Important String Properties & Methods (Most Used)

| Method                    | Description                                      | Example                                 | Output           |
|---------------------------|--------------------------------------------------|-----------------------------------------|------------------|
| `.length`                 | Returns length of string                         | `"hello".length`                        | 5                |
| `.toUpperCase()`          | Convert to uppercase                             | `"Hi".toUpperCase()`                    | "HI"             |
| `.toLowerCase()`          | Convert to lowercase                             | `"Hi".toLowerCase()`                    | "hi"             |
| `.trim()`                 | Remove whitespace from both ends                 | `"  hi  ".trim()`                       | "hi"             |
| `.trimStart() / trimEnd()`| Remove from start/end                            | `"  hi  ".trimStart()`                  | "hi  "           |
| `.includes(substr)`       | Check if substring exists                        | `"hello".includes("ell")`               | true             |
| `.startsWith() / endsWith()` | Check prefix/suffix                           | `"hello".startsWith("he")`              | true             |
| `.indexOf(substr)`        | First occurrence (-1 if not found)               | `"hello".indexOf("l")`                  | 2                |
| `.lastIndexOf()`          | Last occurrence                                  | `"hello".lastIndexOf("l")`              | 3                |
| `.substring(start, end)`  | Extract part (end not included)                  | `"hello".substring(1,4)`                | "ell"            |
| `.slice(start, end)`      | Extract (supports negative indexes)              | `"hello".slice(-3)`                     | "llo"            |
| `.replace(search, new)`   | Replace first match                              | `"hi hi".replace("hi", "bye")`          | "bye hi"         |
| `.replaceAll()`           | Replace all matches (ES2021+)                    | `"hi hi".replaceAll("hi", "bye")`       | "bye bye"        |
| `.split(separator)`       | Convert string → array                           | `"a,b,c".split(",")`                    | ["a","b","c"]    |
| `.charAt(index)`          | Get char at index (safe)                         | `"hello".charAt(1)`                     | "e"              |
| `[index]`                 | Modern way to access char                        | `"hello"[1]`                            | "e"              |
| `.repeat(n)`              | Repeat string n times                            | `"ha".repeat(3)`                        | "hahaha"         |
| `.padStart() / padEnd()`  | Add padding                                      | `"5".padStart(3,"0")`                   | "005"            |

### 5. Escape Characters

| Sequence | Meaning              |
|---------|----------------------|
| `\'`    | Single quote         |
| `\"`    | Double quote         |
| `\\`    | Backslash            |
| `\n`    | New line             |
| `\t`    | Tab                  |
| `\``    | Backtick (in template) |

### 6. String Comparison

```js
"apple" < "banana"     // true (lexicographical order)
"abc" === "abc"        // true
"2" == 2               // true (coercion)
"2" === 2              // false (strict)

"hello".localeCompare("hello")  // 0  (equal)
"hello".localeCompare("hi")     // -1 (hello comes before hi)
```

### 7. Strings are Immutable!

You **cannot** change individual characters:

```js
let s = "hello";
s[0] = "H";     // Does NOT work!
console.log(s); // still "hello"

s = "Hello";     // Works — creates new string
```

### 8. Common Interview Questions & Tricks

```js
// 1. Reverse a string
function reverse(str) {
  return str.split('').reverse().join('');
}

// 2. Check palindrome (ignore case & spaces)
function isPalindrome(str) {
  let cleaned = str.toLowerCase().replace(/[^a-z0-9]/g, '');
  return cleaned === cleaned.split('').reverse().join('');
}

// 3. Count vowels
function countVowels(str) {
  return (str.match(/[aeiou]/gi) || []).length;
}
```

### Final Cheat Sheet (Copy-Paste Ready)

```js
// Creation
let s1 = "Hello";
let s2 = 'World';
let s3 = `Hello ${name}`;           // Template literal
let s4 = String("123");             // Conversion

// Common Methods
s.length
s.toUpperCase()
s.toLowerCase()
s.trim()
s.includes("abc")
s.startsWith("He")
s.indexOf("l")
s.slice(1, 4)
s.substring(1, 4)
s.replace("old", "new")
s.replaceAll("hi", "bye")
s.split(" ")
s.charAt(0)
s[0]
s.repeat(3)
"5".padStart(3, "0")
```

**Golden Rule**:  
Always prefer **string literals** (`"hello"` or `` `hello` ``) over `new String()`.


# How Strings Are Actually Stored in JavaScript  
(2025 Updated – Real Engine Behavior + Myths Busted)

| Concept                        | Reality in Modern JS (V8, SpiderMonkey, JSC) | What Many Articles Get Wrong |
|-------------------------------|--------------------------------------------------|--------------------------------|
| String Constant Pool (like Java) | Does NOT exist                              | Many sites still say JS has a “String Constant Pool” – false |
| String Interning              | Yes, but automatic & optional by engine          | Not guaranteed, not standardized |
| Primitive vs Object           | Most strings are primitives                     | `new String()` creates wrapper objects |
| Memory Sharing                | Same literal → usually same memory location      | Only for literals, not for runtime-generated strings |

### Real-World Behavior (Tested on Node.js 20+, Chrome 130+)

```js
// 1. String Literals → Interned (shared memory)
let a = "GeeksforGeeks";
let b = "GeeksforGeeks";
console.log(a === b);           // true
console.log(a === "GeeksforGeeks"); // true
// All three point to the exact same memory location (engine optimization)

// 2. Runtime-created strings → NOT interned (usually)
let c = "Geeks".concat("for", "Geeks");
let d = "GeeksforGeeks";
console.log(c === d);           // false in most cases (different objects)

// 3. new String() → Always separate objects (heap)
let x = new String("Hello");
let y = new String("Hello");
console.log(x === y);           // false
console.log(x == y);            // true  (coercion to primitive)
console.log(x === "Hello");     // false (object vs primitive)
```

### Memory Diagram (Accurate 2025 Version)

```
Stack                              Heap
┌─────────────┐
│ a: ────────▶│ "GeeksforGeeks" ◄─────┐
│ b: ────────▶│ (interned string)       │
│ d: ────────▶│ (same location)         │
└─────────────┘                         │
                                        │
let c = "Geeks" + "for" + "Geeks";      │
c: ─────────────────────▶ "GeeksforGeeks" (new location)
                                        │
let x = new String("Hello");            │
x: ─────────────────────▶ String Object ──▶ primitive "Hello"
let y = new String("Hello");            │
y: ─────────────────────▶ String Object ──▶ primitive "Hello"
                                        (different wrapper objects)
```

### Official Truth (ECMAScript Spec + Engine Reality)

| Feature                     | Behavior in JS |
|----------------------------|------------------|
| String interning           | Implementation-defined (not required by spec) |
| `"hello" === "hello"`      | Always true (guaranteed) |
| `new String("a") === new String("a")` | Always false |
| `"a" + "b" === "ab"`       | Usually false in V8 (separate allocation) |
| `String("abc") === "abc"`  | true (explicit conversion) |

### Pro Tips for Interviews & Real Code

```js
// Force interning (rarely needed)
function intern(str) {
  return Object(str); // or str.toString(), "" + str, etc.
  // In V8, this sometimes forces reuse of existing string
}

// Best practices
const name = "John";                    // Always use literals
const msg = `Hello ${name}`;            // Template literals = primitives

// Never do this in production
const bad = new String("bad idea");     // Creates unnecessary object
```

### Summary Table (Copy-Paste for Notes)

| Creation Method             | Type         | Memory Shared? | `===` with same value | Recommended |
|--------------------------------|--------------|----------------|-----------------------|-------------|
| `"hello"`                      | Primitive    | Yes (interned) | true                  | YES      |
| `'hello'`                      | Primitive    | Yes            | true                  | YES      |
| `` `hello` ``                  | Primitive    | Yes            | true                  | YES      |
| `"hel" + "lo"` (compile-time)  | Primitive    | Yes            | true                  | YES      |
| `"hel" + "lo"` (runtime)       | Primitive    | Usually No     | often false           | —        |
| `new String("hello")`          | Object       | Never          | false                 | NEVER    |
| `String("hello")` (no new)     | Primitive    | Yes            | true                  | Only for conversion |

### Final Answer to the Question  
**“How are strings stored in JavaScript?”**

> **String literals are stored as immutable primitives and are automatically interned by modern JavaScript engines (V8, SpiderMonkey, etc.) so that identical literals share the same memory location. Runtime-generated strings usually get their own memory allocation. Using `new String()` creates a full wrapper object on the heap and should be avoided.**
